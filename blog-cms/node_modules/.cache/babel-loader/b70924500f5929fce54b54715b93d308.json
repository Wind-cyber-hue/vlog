{"remainingRequest":"/Users/cm/Blog/blog-cms/node_modules/babel-loader/lib/index.js!/Users/cm/Blog/blog-cms/src/plugins/axios.js","dependencies":[{"path":"/Users/cm/Blog/blog-cms/src/plugins/axios.js","mtime":1683690398264},{"path":"/Users/cm/Blog/blog-cms/node_modules/cache-loader/dist/cjs.js","mtime":1683698845457},{"path":"/Users/cm/Blog/blog-cms/node_modules/babel-loader/lib/index.js","mtime":1683698845760}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOwppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtdWkiOwp2YXIgcmVxdWVzdCA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA5MC9hZG1pbi8nLAogIHRpbWVvdXQ6IDEwMDAwCn0pOwp2YXIgQ2FuY2VsVG9rZW4gPSBheGlvcy5DYW5jZWxUb2tlbjsgLy8g6K+35rGC5oum5oiqCgpyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy/lr7nkuo7orr/lrqLmqKHlvI/vvIzpmaRHRVTor7fmsYLlpJbvvIzpg73mi6bmiKrlubbmj5DnpLoKICB2YXIgdXNlckpzb24gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSB8fCAne30nOwogIHZhciB1c2VyID0gSlNPTi5wYXJzZSh1c2VySnNvbik7CgogIGlmICh1c2VySnNvbiAhPT0gJ3t9JyAmJiB1c2VyLnJvbGUgIT09ICdST0xFX2FkbWluJyAmJiBjb25maWcubWV0aG9kICE9PSAnZ2V0JykgewogICAgY29uZmlnLmNhbmNlbFRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGNhbmNlbCkgewogICAgICBjYW5jZWwoJ+a8lOekuuaooeW8j++8jOS4jeWFgeiuuOaTjeS9nCcpOwogICAgfSk7CiAgICByZXR1cm4gY29uZmlnOwogIH0KCiAgTlByb2dyZXNzLnN0YXJ0KCk7CiAgdmFyIHRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB0b2tlbjsKICB9CgogIHJldHVybiBjb25maWc7Cn0pOyAvLyDlk43lupTmi6bmiKoKCnJlcXVlc3QuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgTlByb2dyZXNzLmRvbmUoKTsKICByZXR1cm4gY29uZmlnLmRhdGE7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChlcnJvci5tZXNzYWdlID09PSAn5ryU56S65qih5byP77yM5LiN5YWB6K645pON5L2cJykgewogICAgTWVzc2FnZS5lcnJvcihlcnJvcik7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcmVxdWVzdDs="},{"version":3,"sources":["/Users/cm/Blog/blog-cms/src/plugins/axios.js"],"names":["axios","NProgress","Message","request","create","baseURL","timeout","CancelToken","interceptors","use","config","userJson","window","localStorage","getItem","user","JSON","parse","role","method","cancelToken","executor","cancel","start","token","headers","Authorization","response","done","data","error","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AACA,SAAQC,OAAR,QAAsB,YAAtB;AAEA,IAAMC,OAAO,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAE,8BADmB;AAE5BC,EAAAA,OAAO,EAAE;AAFmB,CAAb,CAAhB;AAKA,IAAIC,WAAW,GAAGP,KAAK,CAACO,WAAxB,C,CAEA;;AACAJ,OAAO,CAACK,YAAR,CAAqBL,OAArB,CAA6BM,GAA7B,CACC,UAAAC,MAAM,EAAI;AACT;AACA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,KAAuC,IAAxD;AACA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWN,QAAX,CAAb;;AACA,MAAIA,QAAQ,KAAK,IAAb,IAAqBI,IAAI,CAACG,IAAL,KAAc,YAAnC,IAAmDR,MAAM,CAACS,MAAP,KAAkB,KAAzE,EAAgF;AAC/ET,IAAAA,MAAM,CAACU,WAAP,GAAqB,IAAIb,WAAJ,CAAgB,SAASc,QAAT,CAAkBC,MAAlB,EAA0B;AAC9DA,MAAAA,MAAM,CAAC,YAAD,CAAN;AACA,KAFoB,CAArB;AAGA,WAAOZ,MAAP;AACA;;AACDT,EAAAA,SAAS,CAACsB,KAAV;AACA,MAAMC,KAAK,GAAGZ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAd;;AACA,MAAIU,KAAJ,EAAW;AACVd,IAAAA,MAAM,CAACe,OAAP,CAAeC,aAAf,GAA+BF,KAA/B;AACA;;AACD,SAAOd,MAAP;AACA,CAjBF,E,CAoBA;;AACAP,OAAO,CAACK,YAAR,CAAqBmB,QAArB,CAA8BlB,GAA9B,CACC,UAAAC,MAAM,EAAI;AACTT,EAAAA,SAAS,CAAC2B,IAAV;AACA,SAAOlB,MAAM,CAACmB,IAAd;AACA,CAJF,EAII,UAAAC,KAAK,EAAI;AACX,MAAIA,KAAK,CAACC,OAAN,KAAkB,YAAtB,EAAoC;AACnC7B,IAAAA,OAAO,CAAC4B,KAAR,CAAcA,KAAd;AACA;AACD,CARF;AAWA,eAAe3B,OAAf","sourcesContent":["import axios from \"axios\";\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\nimport {Message} from \"element-ui\"\n\nconst request = axios.create({\n\tbaseURL: 'http://localhost:8090/admin/',\n\ttimeout: 10000,\n})\n\nlet CancelToken = axios.CancelToken\n\n// 请求拦截\nrequest.interceptors.request.use(\n\tconfig => {\n\t\t//对于访客模式，除GET请求外，都拦截并提示\n\t\tconst userJson = window.localStorage.getItem('user') || '{}'\n\t\tconst user = JSON.parse(userJson)\n\t\tif (userJson !== '{}' && user.role !== 'ROLE_admin' && config.method !== 'get') {\n\t\t\tconfig.cancelToken = new CancelToken(function executor(cancel) {\n\t\t\t\tcancel('演示模式，不允许操作')\n\t\t\t})\n\t\t\treturn config\n\t\t}\n\t\tNProgress.start()\n\t\tconst token = window.localStorage.getItem('token')\n\t\tif (token) {\n\t\t\tconfig.headers.Authorization = token\n\t\t}\n\t\treturn config\n\t}\n)\n\n// 响应拦截\nrequest.interceptors.response.use(\n\tconfig => {\n\t\tNProgress.done()\n\t\treturn config.data\n\t}, error => {\n\t\tif (error.message === '演示模式，不允许操作') {\n\t\t\tMessage.error(error)\n\t\t}\n\t}\n)\n\nexport default request"]}]}