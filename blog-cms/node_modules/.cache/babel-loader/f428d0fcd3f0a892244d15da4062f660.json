{"remainingRequest":"/Users/cm/Blog/blog-cms/node_modules/babel-loader/lib/index.js!/Users/cm/Blog/blog-cms/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/cm/Blog/blog-cms/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cm/Blog/blog-cms/src/views/page/About.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cm/Blog/blog-cms/src/views/page/About.vue","mtime":1683690398268},{"path":"/Users/cm/Blog/blog-cms/node_modules/cache-loader/dist/cjs.js","mtime":1683698845457},{"path":"/Users/cm/Blog/blog-cms/node_modules/babel-loader/lib/index.js","mtime":1683698845760},{"path":"/Users/cm/Blog/blog-cms/node_modules/cache-loader/dist/cjs.js","mtime":1683698845457},{"path":"/Users/cm/Blog/blog-cms/node_modules/vue-loader/lib/index.js","mtime":1683698847009}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEJyZWFkY3J1bWIgZnJvbSAiQC9jb21wb25lbnRzL0JyZWFkY3J1bWIiOwppbXBvcnQgeyBnZXRBYm91dCwgdXBkYXRlQWJvdXQgfSBmcm9tICJAL2FwaS9hYm91dCI7CmltcG9ydCBWZGl0b3IgZnJvbSAidmRpdG9yIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBYm91dCIsCiAgY29tcG9uZW50czogewogICAgQnJlYWRjcnVtYjogQnJlYWRjcnVtYgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZkaXRvcjogbnVsbCwKICAgICAgZm9ybTogewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBtdXNpY0lkOiBudWxsLAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIGNvbW1lbnRFbmFibGVkOiB0cnVlCiAgICAgIH0sCiAgICAgIGZvcm1SdWxlczogewogICAgICAgIHRpdGxlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5qCH6aKYJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRWZGl0b3IoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5Yid5aeL5YyWbWTnvJbovpHlmagKICAgIGluaXRWZGl0b3I6IGZ1bmN0aW9uIGluaXRWZGl0b3IoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICBoZWlnaHQ6IDY0MCwKICAgICAgICBtb2RlOiAnc3YnLAogICAgICAgIC8v5YiG5bGP5riy5p+TCiAgICAgICAgb3V0bGluZTogdHJ1ZSwKICAgICAgICAvL+Wkp+e6sgogICAgICAgIGNhY2hlOiB7CiAgICAgICAgICAvL+S4jee8k+WtmOWIsGxvY2FsU3RvcmFnZQogICAgICAgICAgZW5hYmxlOiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgcmVzaXplOiB7CiAgICAgICAgICAvL+WPr+iwg+aVtOmrmOW6pgogICAgICAgICAgZW5hYmxlOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBhZnRlcjogZnVuY3Rpb24gYWZ0ZXIoKSB7CiAgICAgICAgICBfdGhpcy5nZXREYXRhKCk7CiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLnZkaXRvciA9IG5ldyBWZGl0b3IoJ3ZkaXRvcicsIG9wdGlvbnMpOwogICAgfSwKICAgIGdldERhdGE6IGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgZ2V0QWJvdXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMyLmZvcm0udGl0bGUgPSByZXMuZGF0YS50aXRsZTsKICAgICAgICAgIF90aGlzMi5mb3JtLm11c2ljSWQgPSByZXMuZGF0YS5tdXNpY0lkOwogICAgICAgICAgX3RoaXMyLmZvcm0uY29udGVudCA9IHJlcy5kYXRhLmNvbnRlbnQ7CiAgICAgICAgICBfdGhpczIuZm9ybS5jb21tZW50RW5hYmxlZCA9IHJlcy5kYXRhLmNvbW1lbnRFbmFibGVkID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7CgogICAgICAgICAgX3RoaXMyLnZkaXRvci5zZXRWYWx1ZShfdGhpczIuZm9ybS5jb250ZW50KTsKCiAgICAgICAgICBfdGhpczIubXNnU3VjY2VzcyhyZXMubXNnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLm1zZ0Vycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5tc2dFcnJvcigi6K+35rGC5aSx6LSlIik7CiAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuZm9ybVJlZi52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIC8v57qv5pWw5a2XCiAgICAgICAgICB2YXIgcmVnID0gL15cZHsxLH0kLzsKCiAgICAgICAgICBpZiAoIXJlZy50ZXN0KF90aGlzMy5mb3JtLm11c2ljSWQpKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczMubXNnRXJyb3IoIuatjOabsklE5pyJ6K+vIik7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGZvcm0gPSB7CiAgICAgICAgICAgIHRpdGxlOiBfdGhpczMuZm9ybS50aXRsZSwKICAgICAgICAgICAgbXVzaWNJZDogX3RoaXMzLmZvcm0ubXVzaWNJZCwKICAgICAgICAgICAgY29udGVudDogX3RoaXMzLnZkaXRvci5nZXRWYWx1ZSgpLAogICAgICAgICAgICBjb21tZW50RW5hYmxlZDogX3RoaXMzLmZvcm0uY29tbWVudEVuYWJsZWQKICAgICAgICAgIH07CiAgICAgICAgICB1cGRhdGVBYm91dChmb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICBfdGhpczMubXNnU3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczMubXNnRXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMzLm1zZ0Vycm9yKCLor7fmsYLlpLHotKUiKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLm1zZ0Vycm9yKCfor7floavlhpnlv4XopoHnmoTooajljZUnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["About.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div>\n\t\t<!--面包屑导航-->\n\t\t<Breadcrumb parentTitle=\"页面管理\"/>\n\n\t\t<el-form :model=\"form\" :rules=\"formRules\" ref=\"formRef\" label-position=\"top\">\n\t\t\t<el-form-item label=\"标题\" prop=\"title\" style=\"width: 50%\">\n\t\t\t\t<el-input v-model=\"form.title\" placeholder=\"请输入标题\"></el-input>\n\t\t\t</el-form-item>\n\n\t\t\t<el-row :gutter=\"20\" style=\"width: 50%\">\n\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t<el-form-item label=\"网易云歌曲ID\" prop=\"musicId\">\n\t\t\t\t\t\t<el-input v-model=\"form.musicId\" type=\"number\" placeholder=\"请输入网易云歌曲ID（可选）\"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t<el-form-item label=\"评论开关\">\n\t\t\t\t\t\t<el-switch v-model=\"form.commentEnabled\" active-text=\"评论\"></el-switch>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</el-col>\n\t\t\t</el-row>\n\n\t\t\t<el-form-item label=\"正文\" prop=\"content\">\n\t\t\t\t<div id=\"vditor\"></div>\n\t\t\t</el-form-item>\n\n\t\t\t<el-form-item style=\"text-align: right;\">\n\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-check\" @click=\"submit\">保存</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\t</div>\n</template>\n\n<script>\n\timport Breadcrumb from \"@/components/Breadcrumb\";\n\timport {getAbout, updateAbout} from \"@/api/about\";\n\timport Vditor from \"vditor\";\n\n\texport default {\n\t\tname: \"About\",\n\t\tcomponents: {Breadcrumb},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tvditor: null,\n\t\t\t\tform: {\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tmusicId: null,\n\t\t\t\t\tcontent: '',\n\t\t\t\t\tcommentEnabled: true\n\t\t\t\t},\n\t\t\t\tformRules: {\n\t\t\t\t\ttitle: [{required: true, message: '请输入标题', trigger: 'change'}],\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.initVditor()\n\t\t},\n\t\tmethods: {\n\t\t\t//初始化md编辑器\n\t\t\tinitVditor() {\n\t\t\t\tconst options = {\n\t\t\t\t\theight: 640,\n\t\t\t\t\tmode: 'sv',//分屏渲染\n\t\t\t\t\toutline: true,//大纲\n\t\t\t\t\tcache: {//不缓存到localStorage\n\t\t\t\t\t\tenable: false,\n\t\t\t\t\t},\n\t\t\t\t\tresize: {//可调整高度\n\t\t\t\t\t\tenable: true\n\t\t\t\t\t},\n\t\t\t\t\tafter: () => {\n\t\t\t\t\t\tthis.getData()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.vditor = new Vditor('vditor', options)\n\t\t\t},\n\t\t\tgetData() {\n\t\t\t\tgetAbout().then(res => {\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tthis.form.title = res.data.title\n\t\t\t\t\t\tthis.form.musicId = res.data.musicId\n\t\t\t\t\t\tthis.form.content = res.data.content\n\t\t\t\t\t\tthis.form.commentEnabled = res.data.commentEnabled === 'true' ? true : false\n\t\t\t\t\t\tthis.vditor.setValue(this.form.content)\n\t\t\t\t\t\tthis.msgSuccess(res.msg)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.msgError(res.msg)\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.msgError(\"请求失败\")\n\t\t\t\t})\n\t\t\t},\n\t\t\tsubmit() {\n\t\t\t\tthis.$refs.formRef.validate(valid => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t//纯数字\n\t\t\t\t\t\tconst reg = /^\\d{1,}$/\n\t\t\t\t\t\tif (!reg.test(this.form.musicId)) {\n\t\t\t\t\t\t\treturn this.msgError(\"歌曲ID有误\")\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst form = {\n\t\t\t\t\t\t\ttitle: this.form.title,\n\t\t\t\t\t\t\tmusicId: this.form.musicId,\n\t\t\t\t\t\t\tcontent: this.vditor.getValue(),\n\t\t\t\t\t\t\tcommentEnabled: this.form.commentEnabled\n\t\t\t\t\t\t}\n\t\t\t\t\t\tupdateAbout(form).then(res => {\n\t\t\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.msgError(res.msg)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\t\tthis.msgError(\"请求失败\")\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn this.msgError('请填写必要的表单')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/views/page"}]}