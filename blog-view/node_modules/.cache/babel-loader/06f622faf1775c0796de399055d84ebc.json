{"remainingRequest":"/Users/cm/Blog/blog-view/node_modules/babel-loader/lib/index.js!/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cm/Blog/blog-view/src/views/moments/Moments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cm/Blog/blog-view/src/views/moments/Moments.vue","mtime":1683690398309},{"path":"/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":1686729283471},{"path":"/Users/cm/Blog/blog-view/node_modules/babel-loader/lib/index.js","mtime":1686729283156},{"path":"/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":1686729283471},{"path":"/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/index.js","mtime":1686729286819}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRNb21lbnRMaXN0QnlQYWdlTnVtLCBsaWtlTW9tZW50IH0gZnJvbSAiQC9hcGkvbW9tZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNb21lbnRzIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy/nlKhsb2NhbFN0b3JhZ2XmnKzlnLDlrZjlgqjlt7LngrnotZ7nmoTliqjmgIFpZOaVsOe7hAogICAgICBsaWtlTW9tZW50SWRzOiBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGlrZU1vbWVudElkcycpIHx8ICdbXScpLAogICAgICBtb21lbnRMaXN0OiBbXSwKICAgICAgcGFnZU51bTogMSwKICAgICAgdG90YWxQYWdlOiAwCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TW9tZW50TGlzdCgpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzTGlrZTogZnVuY3Rpb24gaXNMaWtlKCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubGlrZU1vbWVudElkcy5pbmRleE9mKGlkKSA+IC0xOwogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGxpa2VNb21lbnRJZHM6IGZ1bmN0aW9uIGxpa2VNb21lbnRJZHMobmV3VmFsdWUpIHsKICAgICAgLy/lsIZsaWtlTW9tZW50SWRz5pyA5paw5YC855qEanNvbuaVsOaNruS/neWtmOWIsGxvY2FsU3RvcmFnZQogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xpa2VNb21lbnRJZHMnLCBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSkpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0TW9tZW50TGlzdDogZnVuY3Rpb24gZ2V0TW9tZW50TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8v5aaC5p6c5pyJ5YiZ5Y+R6YCB5Y2a5Li76Lqr5Lu9VG9rZW4KICAgICAgdmFyIGFkbWluVG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FkbWluVG9rZW4nKTsKICAgICAgdmFyIHRva2VuID0gYWRtaW5Ub2tlbiA/IGFkbWluVG9rZW4gOiAnJzsKICAgICAgZ2V0TW9tZW50TGlzdEJ5UGFnZU51bSh0b2tlbiwgdGhpcy5wYWdlTnVtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMubW9tZW50TGlzdCA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgICBfdGhpcy50b3RhbFBhZ2UgPSByZXMuZGF0YS50b3RhbFBhZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLm1zZ0Vycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLm1zZ0Vycm9yKCLor7fmsYLlpLHotKUiKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZShuZXdQYWdlKSB7CiAgICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKTsKICAgICAgdGhpcy5wYWdlTnVtID0gbmV3UGFnZTsKICAgICAgdGhpcy5nZXRNb21lbnRMaXN0KCk7CiAgICB9LAogICAgbGlrZTogZnVuY3Rpb24gbGlrZShpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmxpa2VNb21lbnRJZHMuaW5kZXhPZihpZCkgPiAtMSkgewogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ+S4jeWPr+S7pemHjeWkjeeCuei1nuWTpicsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxpa2VNb21lbnQoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpczIuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiByZXMubXNnLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMi5saWtlTW9tZW50SWRzLnB1c2goaWQpOwoKICAgICAgICAgIF90aGlzMi5tb21lbnRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IGlkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGlrZXMrKzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6IHJlcy5tc2csCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRub3RpZnkoewogICAgICAgICAgdGl0bGU6ICflvILluLjplJnor68nLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Moments.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div>\n\t\t<div class=\"ui top attached segment\" style=\"text-align: center\">\n\t\t\t<h2 class=\"m-text-500\">我的动态</h2>\n\t\t</div>\n\t\t<div class=\"ui attached segment m-padding-bottom-large\">\n\t\t\t<div class=\"moments\">\n\t\t\t\t<div class=\"moment\" v-for=\"(moment,index) in momentList\" :key=\"index\">\n\t\t\t\t\t<div class=\"avatar\">\n\t\t\t\t\t\t<img :src=\"$store.state.introduction.avatar\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui card\">\n\t\t\t\t\t\t<div class=\"content m-top\">\n\t\t\t\t\t\t\t<span style=\"font-weight: 700\">{{ $store.state.introduction.name }}</span>\n\t\t\t\t\t\t\t<span class=\"right floated\">{{ moment.createTime | dateFromNow }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"content typo\" :class=\"{'privacy':!moment.published}\" v-viewer v-html=\"moment.content\"></div>\n\t\t\t\t\t\t<div class=\"extra content\">\n\t\t\t\t\t\t\t<a class=\"left floated\" @click=\"like(moment.id)\">\n\t\t\t\t\t\t\t\t<i class=\"heart icon\" :class=\"isLike(moment.id)?'like-color':'outline'\"></i>{{ moment.likes }}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<el-pagination @current-change=\"handleCurrentChange\" :current-page=\"pageNum\" :page-count=\"totalPage\"\n\t\t\t               layout=\"prev, pager, next\" background hide-on-single-page class=\"pagination\">\n\t\t\t</el-pagination>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport {getMomentListByPageNum, likeMoment} from \"@/api/moment\";\n\n\texport default {\n\t\tname: \"Moments\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t//用localStorage本地存储已点赞的动态id数组\n\t\t\t\tlikeMomentIds: JSON.parse(window.localStorage.getItem('likeMomentIds') || '[]'),\n\t\t\t\tmomentList: [],\n\t\t\t\tpageNum: 1,\n\t\t\t\ttotalPage: 0\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.getMomentList()\n\t\t},\n\t\tcomputed: {\n\t\t\tisLike() {\n\t\t\t\treturn function (id) {\n\t\t\t\t\treturn this.likeMomentIds.indexOf(id) > -1\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tlikeMomentIds(newValue) {\n\t\t\t\t//将likeMomentIds最新值的json数据保存到localStorage\n\t\t\t\twindow.localStorage.setItem('likeMomentIds', JSON.stringify(newValue))\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tgetMomentList() {\n\t\t\t\t//如果有则发送博主身份Token\n\t\t\t\tconst adminToken = window.localStorage.getItem('adminToken')\n\t\t\t\tconst token = adminToken ? adminToken : ''\n\t\t\t\tgetMomentListByPageNum(token, this.pageNum).then(res => {\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tthis.momentList = res.data.list\n\t\t\t\t\t\tthis.totalPage = res.data.totalPage\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.msgError(res.msg)\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.msgError(\"请求失败\")\n\t\t\t\t})\n\t\t\t},\n\t\t\thandleCurrentChange(newPage) {\n\t\t\t\tthis.scrollToTop()\n\t\t\t\tthis.pageNum = newPage\n\t\t\t\tthis.getMomentList()\n\t\t\t},\n\t\t\tlike(id) {\n\t\t\t\tif (this.likeMomentIds.indexOf(id) > -1) {\n\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\ttitle: '不可以重复点赞哦',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlikeMoment(id).then(res => {\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\t\ttitle: res.msg,\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.likeMomentIds.push(id)\n\t\t\t\t\t\tthis.momentList.forEach(item => {\n\t\t\t\t\t\t\tif (item.id === id) {\n\t\t\t\t\t\t\t\treturn item.likes++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\t\ttitle: res.msg,\n\t\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\ttitle: '异常错误',\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.avatar {\n\t\tmargin-left: -62.5px;\n\t\tfloat: left !important;\n\t}\n\n\t.avatar img {\n\t\theight: 45px;\n\t\twidth: 45px;\n\t\tborder-radius: 500px;\n\t}\n\n\t.moments {\n\t\tmargin-left: 26px !important;\n\t\tpadding-left: 40px !important;\n\t\tborder-left: 1px solid #dee5e7 !important;\n\t}\n\n\t.moment {\n\t\tmargin-top: 30px;\n\t}\n\n\t.moment:first-child {\n\t\tmargin-top: 0 !important;\n\t}\n\n\t.card {\n\t\twidth: 100% !important;\n\t}\n\n\t.card:before {\n\t\tborder-width: 0 0 1px 1px !important;\n\t\ttransform: translateX(-50%) translateY(-50%) rotate(45deg) !important;\n\t\tbottom: auto !important;\n\t\tright: auto !important;\n\t\ttop: 22px !important;\n\t\tleft: 0 !important;\n\t\tposition: absolute !important;\n\t\tcontent: '' !important;\n\t\tbackground-image: none !important;\n\t\tz-index: 2 !important;\n\t\twidth: 12px !important;\n\t\theight: 12px !important;\n\t\ttransition: background .1s ease !important;\n\t\tbackground-color: inherit !important;\n\t\tborder-style: solid !important;\n\t\tborder-color: #d4d4d5 !important;\n\t}\n\n\t.content.m-top {\n\t\tpadding: 10px 14px !important;\n\t}\n\n\t.content .right.floated {\n\t\tfont-size: 12px !important;\n\t}\n\n\t.content.typo * {\n\t\tfont-size: 14px !important;\n\t}\n\n\t.extra.content {\n\t\tpadding: 5px 14px !important;\n\t}\n\n\t.extra.content a {\n\t\tcolor: rgba(0, 0, 0, 0.7) !important;\n\t\tfont-size: 12px !important;\n\t}\n\n\t.extra.content a:hover {\n\t\tcolor: red !important;\n\t}\n\n\t.extra.content .like-color {\n\t\tcolor: red !important;\n\t}\n\n\t.extra.content i {\n\t\tfont-size: 12px !important;\n\t}\n\n\t.pagination {\n\t\ttext-align: center;\n\t\tmargin-top: 3em;\n\t}\n\n\t.privacy {\n\t\tbackground: repeating-linear-gradient(145deg, #f2f2f2, #f2f2f2 15px, #fff 0, #fff 30px) !important;\n\t}\n</style>"],"sourceRoot":"src/views/moments"}]}