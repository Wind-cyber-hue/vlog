{"remainingRequest":"/Users/cm/Blog/blog-view/node_modules/thread-loader/dist/cjs.js!/Users/cm/Blog/blog-view/node_modules/babel-loader/lib/index.js!/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cm/Blog/blog-view/src/views/blog/Blog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cm/Blog/blog-view/src/views/blog/Blog.vue","mtime":1683690398304},{"path":"/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":1683698965703},{"path":"/Users/cm/Blog/blog-view/node_modules/thread-loader/dist/cjs.js","mtime":1683698965660},{"path":"/Users/cm/Blog/blog-view/node_modules/babel-loader/lib/index.js","mtime":1683698965965},{"path":"/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":1683698965703},{"path":"/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/index.js","mtime":1683698966671}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2NtL0Jsb2cvYmxvZy12aWV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QmxvZ0J5SWQgfSBmcm9tICJAL2FwaS9ibG9nIjsKaW1wb3J0IENvbW1lbnRMaXN0IGZyb20gIkAvY29tcG9uZW50cy9jb21tZW50L0NvbW1lbnRMaXN0IjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgU0VUX0ZPQ1VTX01PREUsIFNFVF9JU19CTE9HX1JFTkRFUl9DT01QTEVURSB9IGZyb20gJ0Avc3RvcmUvbXV0YXRpb25zLXR5cGVzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJCbG9nIiwKICBjb21wb25lbnRzOiB7CiAgICBDb21tZW50TGlzdDogQ29tbWVudExpc3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBibG9nOiB7fSwKICAgICAgYmlnRm9udFNpemU6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoewogICAgYmxvZ0lkOiBmdW5jdGlvbiBibG9nSWQoKSB7CiAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgfQogIH0sIG1hcFN0YXRlKFsnc2l0ZUluZm8nLCAnZm9jdXNNb2RlJ10pKSwKICBiZWZvcmVSb3V0ZUVudGVyOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICAvL+i3r+eUseWIsOWNmuWuouaWh+eroOmhtemdouS5i+WJje+8jOW6lOWwhuaWh+eroOeahOa4suafk+WujOaIkOeKtuaAgee9ruS4uiBmYWxzZQogICAgbmV4dChmdW5jdGlvbiAodm0pIHsKICAgICAgLy8g5b2TIGJlZm9yZVJvdXRlRW50ZXIg6ZKp5a2Q5omn6KGM5YmN77yM57uE5Lu25a6e5L6L5bCa5pyq5Yib5bu6CiAgICAgIC8vIHZtIOWwseaYr+W9k+WJjee7hOS7tueahOWunuS+i++8jOWPr+S7peWcqCBuZXh0IOaWueazleS4reaKiiB2bSDlvZPlgZogdGhpc+eUqAogICAgICB2bS4kc3RvcmUuY29tbWl0KFNFVF9JU19CTE9HX1JFTkRFUl9DT01QTEVURSwgZmFsc2UpOwogICAgfSk7CiAgfSwKICBiZWZvcmVSb3V0ZUxlYXZlOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZUxlYXZlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoU0VUX0ZPQ1VTX01PREUsIGZhbHNlKTsgLy8g5LuO5paH56ug6aG16Z2i6Lev55Sx5Yiw5YW25a6D6aG16Z2i5pe277yM6ZSA5q+B5b2T5YmN57uE5Lu255qE5ZCM5pe277yM6KaB6ZSA5q+BdG9jYm905a6e5L6LCiAgICAvLyDlkKbliJl0b2Nib3TkuIDnm7TlnKjnm5HlkKzpobXpnaLmu5rliqjkuovku7bvvIzogIzmlofnq6DpobXpnaLnmoTplJrngrnlt7Lnu4/kuI3lrZjlnKjkuobvvIzkvJrmiqUiVW5jYXVnaHQgVHlwZUVycm9yOiBDYW5ub3QgcmVhZCBwcm9wZXJ0eSAnY2xhc3NOYW1lJyBvZiBudWxsIgoKICAgIHRvY2JvdC5kZXN0cm95KCk7CiAgICBuZXh0KCk7CiAgfSwKICBiZWZvcmVSb3V0ZVVwZGF0ZTogZnVuY3Rpb24gYmVmb3JlUm91dGVVcGRhdGUodG8sIGZyb20sIG5leHQpIHsKICAgIC8vIOS4gOiIrOacieS4pOenjeaDheWGteS8muinpuWPkei/meS4qumSqeWtkAogICAgLy8g4pGg5b2T5YmN5paH56ug6aG16Z2i6Lez6L2s5Yiw5YW25a6D5paH56ug6aG16Z2iCiAgICAvLyDikaHngrnlh7vnm67lvZXot7PovazplJrngrnml7bvvIzot6/nlLFoYXNo5YC85Lya5pS55Y+Y77yM5a+86Ie05b2T5YmN6aG16Z2i5Lya6YeN5paw5Yqg6L2977yM6L+Z56eN5oOF5Ya15piv5LiN5biM5pyb5Ye6546w55qECiAgICAvLyDlnKjot6/nlLEgYmVmb3JlUm91dGVVcGRhdGUg5Lit5Yik5pat6Lev5b6E5piv5ZCm5pS55Y+YCiAgICAvLyDlpoLmnpzot7PovazliLDlhbblroPpobXpnaLvvIx0by5wYXRoIT09ZnJvbS5wYXRoIOWwseaUvuihjCBuZXh0KCkKICAgIC8vIOWmguaenOaYr+i3s+i9rOmUmueCue+8jHBhdGjkuI3kvJrmlLnlj5jvvIxoYXNo5Lya5pS55Y+Y77yMdG8ucGF0aD09PWZyb20ucGF0aCwgdG8uaGFzaCE9PWZyb20ucGF0aCDkuI3mlL7ooYzot6/nlLHot7PovazvvIzlsLHog73orqnplJrngrnmraPluLjot7PovawKICAgIGlmICh0by5wYXRoICE9PSBmcm9tLnBhdGgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KFNFVF9GT0NVU19NT0RFLCBmYWxzZSk7IC8v5Zyo5b2T5YmN57uE5Lu25YaF6Lev55Sx5Yiw5YW25a6D5Y2a5a6i5paH56ug5pe277yM6KaB6YeN5paw6I635Y+W5paH56ugCgogICAgICB0aGlzLmdldEJsb2codG8ucGFyYW1zLmlkKTsgLy/lj6ropoHot6/nlLHot6/lvoTmnInmlLnlj5jvvIzkuJTlgZznlZnlnKjlvZPliY1CbG9n57uE5Lu25YaF77yM5bCx5oqK5paH56ug55qE5riy5p+T5a6M5oiQ54q25oCB572u5Li6IGZhbHNlCgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoU0VUX0lTX0JMT0dfUkVOREVSX0NPTVBMRVRFLCBmYWxzZSk7CiAgICAgIG5leHQoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEJsb2coKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEJsb2c6IGZ1bmN0aW9uIGdldEJsb2coKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuYmxvZ0lkOwogICAgICAvL+WvhueggeS/neaKpOeahOaWh+eroO+8jOmcgOimgeWPkemAgeWvhueggemqjOivgemAmui/h+WQjuS/neWtmOWcqGxvY2FsU3RvcmFnZeeahFRva2VuCiAgICAgIHZhciBibG9nVG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oImJsb2ciLmNvbmNhdChpZCkpOyAvL+WmguaenOacieWImeWPkemAgeWNmuS4u+i6q+S7vVRva2VuCgogICAgICB2YXIgYWRtaW5Ub2tlbiA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhZG1pblRva2VuJyk7CiAgICAgIHZhciB0b2tlbiA9IGFkbWluVG9rZW4gPyBhZG1pblRva2VuIDogYmxvZ1Rva2VuID8gYmxvZ1Rva2VuIDogJyc7CiAgICAgIGdldEJsb2dCeUlkKHRva2VuLCBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzLmJsb2cgPSByZXMuZGF0YTsKICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gX3RoaXMuYmxvZy50aXRsZSArIF90aGlzLnNpdGVJbmZvLndlYlRpdGxlU3VmZml4OyAvL3YtaHRtbOa4suafk+WujOavleWQju+8jOa4suafk+S7o+eggeWdl+agt+W8jwoKICAgICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIFByaXNtLmhpZ2hsaWdodEFsbCgpOyAvL+WwhuaWh+eroOa4suafk+WujOaIkOeKtuaAgee9ruS4uiB0cnVlCgogICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KFNFVF9JU19CTE9HX1JFTkRFUl9DT01QTEVURSwgdHJ1ZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMubXNnRXJyb3IocmVzLm1zZyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubXNnRXJyb3IoIuivt+axguWksei0pSIpOwogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VGb2N1c01vZGU6IGZ1bmN0aW9uIGNoYW5nZUZvY3VzTW9kZSgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KFNFVF9GT0NVU19NT0RFLCAhdGhpcy5mb2N1c01vZGUpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Blog.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div>\n\t\t<div class=\"ui padded attached segment m-padded-tb-large\">\n\t\t\t<div class=\"ui large red right corner label\" v-if=\"blog.top\">\n\t\t\t\t<i class=\"arrow alternate circle up icon\"></i>\n\t\t\t</div>\n\t\t\t<div class=\"ui middle aligned mobile reversed stackable\">\n\t\t\t\t<div class=\"ui grid m-margin-lr\">\n\t\t\t\t\t<!--标题-->\n\t\t\t\t\t<div class=\"row m-padded-tb-small\">\n\t\t\t\t\t\t<h2 class=\"ui header m-center\">{{ blog.title }}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--文章简要信息-->\n\t\t\t\t\t<div class=\"row m-padded-tb-small\">\n\t\t\t\t\t\t<div class=\"ui horizontal link list m-center\">\n\t\t\t\t\t\t\t<div class=\"item m-datetime\">\n\t\t\t\t\t\t\t\t<i class=\"small calendar icon\"></i><span>{{ blog.createTime | dateFormat('YYYY-MM-DD') }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"item m-views\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-s-data\"></i><span>{{ blog.views }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"item m-common-gray\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-s-comment\"></i><span>123</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a class=\"item m-common-gray\" @click.prevent=\"bigFontSize=!bigFontSize\">\n\t\t\t\t\t\t\t\t<div data-inverted=\"\" data-tooltip=\"点击切换字体大小\" data-position=\"top center\">\n\t\t\t\t\t\t\t\t\t<i class=\"font icon\"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<a class=\"item m-common-gray\" @click.prevent=\"changeFocusMode\">\n\t\t\t\t\t\t\t\t<div data-inverted=\"\" data-tooltip=\"专注模式\" data-position=\"top center\">\n\t\t\t\t\t\t\t\t\t<i class=\"book icon\"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--分类-->\n\t\t\t\t\t<router-link :to=\"`/category/${blog.category.name}`\" class=\"ui orange large ribbon label\" v-if=\"blog.category\">\n\t\t\t\t\t\t<i class=\"small folder open icon\"></i><span class=\"m-text-500\">{{ blog.category.name }}</span>\n\t\t\t\t\t</router-link>\n\t\t\t\t\t<!--文章Markdown正文-->\n\t\t\t\t\t<div class=\"typo js-toc-content m-padded-tb-small line-numbers match-braces rainbow-braces\" v-viewer :class=\"{'m-big-fontsize':bigFontSize}\" v-html=\"blog.content\"></div>\n\t\t\t\t\t<!--赞赏-->\n\t\t\t\t\t<div style=\"margin: 2em auto\">\n\t\t\t\t\t\t<el-popover placement=\"top\" width=\"220\" trigger=\"click\" v-if=\"blog.appreciation\">\n\t\t\t\t\t\t\t<div class=\"ui orange basic label\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t<div class=\"image\">\n\t\t\t\t\t\t\t\t\t<div style=\"font-size: 12px;text-align: center;margin-bottom: 5px;\">一毛是鼓励</div>\n\t\t\t\t\t\t\t\t\t<img :src=\"$store.state.siteInfo.reward\" alt=\"\" class=\"ui rounded bordered image\" style=\"width: 100%\">\n\t\t\t\t\t\t\t\t\t<div style=\"font-size: 12px;text-align: center;margin-top: 5px;\">一块是真爱</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<el-button slot=\"reference\" class=\"ui orange inverted circular button m-text-500\">赞赏</el-button>\n\t\t\t\t\t\t</el-popover>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--横线-->\n\t\t\t\t\t<el-divider></el-divider>\n\t\t\t\t\t<!--标签-->\n\t\t\t\t\t<div class=\"row m-padded-tb-no\">\n\t\t\t\t\t\t<div class=\"column m-padding-left-no\">\n\t\t\t\t\t\t\t<router-link :to=\"`/tag/${tag.name}`\" class=\"ui tag label m-text-500 m-margin-small\" :class=\"tag.color\" v-for=\"(tag,index) in blog.tags\" :key=\"index\">{{ tag.name }}</router-link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<!--博客信息-->\n\t\t<div class=\"ui attached positive message\">\n\t\t\t<ul class=\"list\">\n\t\t\t\t<!-- <li>作者：{{ $store.state.introduction.name }}\n\t\t\t\t\t<router-link to=\"/about\">（联系作者）</router-link>\n\t\t\t\t</li> -->\n\t\t\t\t<li>最后修改：{{ blog.updateTime | dateFormat('YYYY-MM-DD HH:mm') }}</li>\n\t\t\t\t<li>如果你觉得我的文章不错，不妨鼓励我继续写作。</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<!--评论-->\n\t\t<div class=\"ui bottom teal attached segment threaded comments\">\n\t\t\t<CommentList :page=\"0\" :blogId=\"blogId\" v-if=\"blog.commentEnabled\"/>\n\t\t\t<h3 class=\"ui header\" v-else>评论已关闭</h3>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport {getBlogById} from \"@/api/blog\";\n\timport CommentList from \"@/components/comment/CommentList\";\n\timport {mapState} from \"vuex\";\n\timport {SET_FOCUS_MODE, SET_IS_BLOG_RENDER_COMPLETE} from '@/store/mutations-types';\n\n\texport default {\n\t\tname: \"Blog\",\n\t\tcomponents: {CommentList},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tblog: {},\n\t\t\t\tbigFontSize: false,\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tblogId() {\n\t\t\t\treturn parseInt(this.$route.params.id)\n\t\t\t},\n\t\t\t...mapState(['siteInfo', 'focusMode'])\n\t\t},\n\t\tbeforeRouteEnter(to, from, next) {\n\t\t\t//路由到博客文章页面之前，应将文章的渲染完成状态置为 false\n\t\t\tnext(vm => {\n\t\t\t\t// 当 beforeRouteEnter 钩子执行前，组件实例尚未创建\n\t\t\t\t// vm 就是当前组件的实例，可以在 next 方法中把 vm 当做 this用\n\t\t\t\tvm.$store.commit(SET_IS_BLOG_RENDER_COMPLETE, false)\n\t\t\t})\n\t\t},\n\t\tbeforeRouteLeave(to, from, next) {\n\t\t\tthis.$store.commit(SET_FOCUS_MODE, false)\n\t\t\t// 从文章页面路由到其它页面时，销毁当前组件的同时，要销毁tocbot实例\n\t\t\t// 否则tocbot一直在监听页面滚动事件，而文章页面的锚点已经不存在了，会报\"Uncaught TypeError: Cannot read property 'className' of null\"\n\t\t\ttocbot.destroy()\n\t\t\tnext()\n\t\t},\n\t\tbeforeRouteUpdate(to, from, next) {\n\t\t\t// 一般有两种情况会触发这个钩子\n\t\t\t// ①当前文章页面跳转到其它文章页面\n\t\t\t// ②点击目录跳转锚点时，路由hash值会改变，导致当前页面会重新加载，这种情况是不希望出现的\n\t\t\t// 在路由 beforeRouteUpdate 中判断路径是否改变\n\t\t\t// 如果跳转到其它页面，to.path!==from.path 就放行 next()\n\t\t\t// 如果是跳转锚点，path不会改变，hash会改变，to.path===from.path, to.hash!==from.path 不放行路由跳转，就能让锚点正常跳转\n\t\t\tif (to.path !== from.path) {\n\t\t\t\tthis.$store.commit(SET_FOCUS_MODE, false)\n\t\t\t\t//在当前组件内路由到其它博客文章时，要重新获取文章\n\t\t\t\tthis.getBlog(to.params.id)\n\t\t\t\t//只要路由路径有改变，且停留在当前Blog组件内，就把文章的渲染完成状态置为 false\n\t\t\t\tthis.$store.commit(SET_IS_BLOG_RENDER_COMPLETE, false)\n\t\t\t\tnext()\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.getBlog()\n\t\t},\n\t\tmethods: {\n\t\t\tgetBlog(id = this.blogId) {\n\t\t\t\t//密码保护的文章，需要发送密码验证通过后保存在localStorage的Token\n\t\t\t\tconst blogToken = window.localStorage.getItem(`blog${id}`)\n\t\t\t\t//如果有则发送博主身份Token\n\t\t\t\tconst adminToken = window.sessionStorage.getItem('adminToken')\n\t\t\t\tconst token = adminToken ? adminToken : (blogToken ? blogToken : '')\n\t\t\t\tgetBlogById(token, id).then(res => {\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tthis.blog = res.data\n\t\t\t\t\t\tdocument.title = this.blog.title + this.siteInfo.webTitleSuffix\n\t\t\t\t\t\t//v-html渲染完毕后，渲染代码块样式\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tPrism.highlightAll()\n\t\t\t\t\t\t\t//将文章渲染完成状态置为 true\n\t\t\t\t\t\t\tthis.$store.commit(SET_IS_BLOG_RENDER_COMPLETE, true)\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.msgError(res.msg)\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.msgError(\"请求失败\")\n\t\t\t\t})\n\t\t\t},\n\t\t\tchangeFocusMode() {\n\t\t\t\tthis.$store.commit(SET_FOCUS_MODE, !this.focusMode)\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.el-divider {\n\t\tmargin: 1rem 0 !important;\n\t}\n\n\th1::before, h2::before, h3::before, h4::before, h5::before, h6::before {\n\t\tdisplay: block;\n\t\tcontent: \" \";\n\t\theight: 55px;\n\t\tmargin-top: -55px;\n\t\tvisibility: hidden;\n\t}\n</style>"],"sourceRoot":"src/views/blog"}]}