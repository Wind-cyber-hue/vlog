{"remainingRequest":"/Users/cm/Blog/blog-view/node_modules/babel-loader/lib/index.js!/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cm/Blog/blog-view/src/components/comment/CommentForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cm/Blog/blog-view/src/components/comment/CommentForm.vue","mtime":1683690398280},{"path":"/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":1686729283471},{"path":"/Users/cm/Blog/blog-view/node_modules/babel-loader/lib/index.js","mtime":1686729283156},{"path":"/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":1686729283471},{"path":"/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/index.js","mtime":1686729286819}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2NtL0Jsb2cvYmxvZy12aWV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgY2hlY2tFbWFpbCB9IGZyb20gIkAvY29tbW9uL3JlZyI7CmltcG9ydCB7IFNFVF9QQVJFTlRfQ09NTUVOVF9JRCB9IGZyb20gIkAvc3RvcmUvbXV0YXRpb25zLXR5cGVzIjsKaW1wb3J0IHR2TWFwcGVyIGZyb20gJ0AvcGx1Z2lucy90dk1hcHBlci5qc29uJzsKaW1wb3J0IGFydU1hcHBlciBmcm9tICdAL3BsdWdpbnMvYXJ1TWFwcGVyLmpzb24nOwppbXBvcnQgcGFvcGFvTWFwcGVyIGZyb20gJ0AvcGx1Z2lucy9wYW9wYW9NYXBwZXIuanNvbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29tbWVudEZvcm0iLAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZShbJ3BhcmVudENvbW1lbnRJZCcsICdjb21tZW50Rm9ybScsICdjb21tZW50UXVlcnknXSkpLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBTRVRfUEFSRU5UX0NPTU1FTlRfSUQ6IFNFVF9QQVJFTlRfQ09NTUVOVF9JRCwKICAgICAgZm9ybVJ1bGVzOiB7CiAgICAgICAgbmlja25hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXor4TorrrmmLXnp7AnCiAgICAgICAgfSwgewogICAgICAgICAgbWF4OiAxOCwKICAgICAgICAgIG1lc3NhZ2U6ICfmmLXnp7DkuI3lj6/lpJrkuo4xNeS4quWtl+espicKICAgICAgICB9XSwKICAgICAgICBlbWFpbDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeivhOiuuumCrueusScKICAgICAgICB9LCB7CiAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrRW1haWwKICAgICAgICB9XQogICAgICB9LAogICAgICBlbW9qaVNob3c6IGZhbHNlLAogICAgICBhY3RpdmVFbW9qaVRhYjogMCwKICAgICAgdHZNYXBwZXI6IFtdLAogICAgICBhcnVNYXBwZXI6IFtdLAogICAgICBwYW9wYW9NYXBwZXI6IFtdLAogICAgICB0ZXh0YXJlYTogbnVsbCwKICAgICAgc3RhcnQ6IDAsCiAgICAgIGVuZDogMAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnR2TWFwcGVyID0gdHZNYXBwZXI7CiAgICB0aGlzLmFydU1hcHBlciA9IGFydU1hcHBlcjsKICAgIHRoaXMucGFvcGFvTWFwcGVyID0gcGFvcGFvTWFwcGVyOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMudGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWwtZm9ybSB0ZXh0YXJlYScpOwogIH0sCiAgbWV0aG9kczogewogICAgc2hvd0Vtb2ppQm94OiBmdW5jdGlvbiBzaG93RW1vamlCb3goKSB7CiAgICAgIHRoaXMuc3RhcnQgPSB0aGlzLnRleHRhcmVhLnNlbGVjdGlvblN0YXJ0OwogICAgICB0aGlzLmVuZCA9IHRoaXMudGV4dGFyZWEuc2VsZWN0aW9uRW5kOwogICAgICB0aGlzLnRleHRhcmVhLmZvY3VzKCk7CiAgICAgIHRoaXMudGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UodGhpcy5zdGFydCwgdGhpcy5lbmQpOwogICAgICB0aGlzLmVtb2ppU2hvdyA9ICF0aGlzLmVtb2ppU2hvdzsKICAgIH0sCiAgICBpbnNlcnRFbW9qaTogZnVuY3Rpb24gaW5zZXJ0RW1vamkobmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN0ciA9IHRoaXMuY29tbWVudEZvcm0uY29udGVudDsKICAgICAgdGhpcy5jb21tZW50Rm9ybS5jb250ZW50ID0gc3RyLnN1YnN0cmluZygwLCB0aGlzLnN0YXJ0KSArIG5hbWUgKyBzdHIuc3Vic3RyaW5nKHRoaXMuZW5kKTsKICAgICAgdGhpcy5zdGFydCArPSBuYW1lLmxlbmd0aDsKICAgICAgdGhpcy5lbmQgPSB0aGlzLnN0YXJ0OwogICAgICB0aGlzLnRleHRhcmVhLmZvY3VzKCk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy50ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZShfdGhpcy5zdGFydCwgX3RoaXMuZW5kKTsKICAgICAgfSk7CiAgICB9LAogICAgaGlkZUVtb2ppQm94OiBmdW5jdGlvbiBoaWRlRW1vamlCb3goKSB7CiAgICAgIHRoaXMuZW1vamlTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMudGV4dGFyZWEuZm9jdXMoKTsKICAgICAgdGhpcy50ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7CiAgICB9LAogICAgcG9zdEZvcm06IGZ1bmN0aW9uIHBvc3RGb3JtKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBhZG1pblRva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhZG1pblRva2VuJyk7CgogICAgICBpZiAoYWRtaW5Ub2tlbikgewogICAgICAgIC8v5Y2a5Li755m75b2V5ZCO77yMbG9jYWxTdG9yYWdl5Lit5Lya5a2Y5YKodG9rZW7vvIzlnKjlkI7nq6/orr7nva7lsZ7mgKfvvIzlj6/ku6XkuI3moKHpqozmmLXnp7DjgIHpgq7nrrEKICAgICAgICBpZiAodGhpcy5jb21tZW50Rm9ybS5jb250ZW50ID09PSAnJyB8fCB0aGlzLmNvbW1lbnRGb3JtLmNvbnRlbnQubGVuZ3RoID4gMjUwKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICfor4TorrrlpLHotKUnLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+E6K665YaF5a655pyJ6K+vJywKICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzdWJtaXRDb21tZW50Rm9ybScsIGFkbWluVG9rZW4pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGJsb2dUb2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYmxvZyIuY29uY2F0KHRoaXMuY29tbWVudFF1ZXJ5LmJsb2dJZCkpOwogICAgICB0aGlzLiRyZWZzLmZvcm1SZWYudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKCF2YWxpZCB8fCBfdGhpczIuY29tbWVudEZvcm0uY29udGVudCA9PT0gJycgfHwgX3RoaXMyLmNvbW1lbnRGb3JtLmNvbnRlbnQubGVuZ3RoID4gMjUwKSB7CiAgICAgICAgICBfdGhpczIuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAn6K+E6K665aSx6LSlJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+ato+ehruWhq+WGmeivhOiuuicsCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goJ3N1Ym1pdENvbW1lbnRGb3JtJywgYmxvZ1Rva2VuID8gYmxvZ1Rva2VuIDogJycpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["CommentForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<!-- 评论输入表单 -->\n\t<div class=\"form\">\n\t\t<h3>\n\t\t\t发表评论\n\t\t\t<el-button class=\"m-small\" size=\"mini\" type=\"primary\" @click=\"$store.commit(SET_PARENT_COMMENT_ID, -1)\" v-show=\"parentCommentId!==-1\">取消回复</el-button>\n\t\t</h3>\n\t\t<el-form :inline=\"true\" :model=\"commentForm\" :rules=\"formRules\" ref=\"formRef\" size=\"small\">\n\t\t\t<el-input :class=\"'textarea'\" type=\"textarea\" :rows=\"5\" v-model=\"commentForm.content\" placeholder=\"评论千万条，友善第一条\"\n\t\t\t          maxlength=\"250\" show-word-limit :validate-event=\"false\"></el-input>\n\t\t\t<div class=\"el-form-item el-form-item--small emoji\">\n\t\t\t\t<img src=\"https://cdn.jsdelivr.net/gh/yoyling/JsDelivr/emoji/paopao/1.png\" @click=\"showEmojiBox\">\n\t\t\t\t<div class=\"mask\" v-show=\"emojiShow\" @click=\"hideEmojiBox\"></div>\n\t\t\t\t<div class=\"emoji-box\" v-show=\"emojiShow\">\n\t\t\t\t\t<div class=\"emoji-title\">\n\t\t\t\t\t\t<span>{{ activeEmojiTab === 0 ? 'tv_小电视' : activeEmojiTab === 1 ? '阿鲁' : '泡泡' }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"emoji-wrap\" v-show=\"activeEmojiTab===0\">\n\t\t\t\t\t\t<div class=\"emoji-list\" v-for=\"(img,index) in tvMapper\" :key=\"index\" @click=\"insertEmoji(img.name)\">\n\t\t\t\t\t\t\t<img :src=\"img.src\" :title=\"img.name\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"emoji-wrap\" v-show=\"activeEmojiTab===1\">\n\t\t\t\t\t\t<div class=\"emoji-list\" v-for=\"(img,index) in aruMapper\" :key=\"index\" @click=\"insertEmoji(img.name)\">\n\t\t\t\t\t\t\t<img :src=\"img.src\" :title=\"img.name\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"emoji-wrap\" v-show=\"activeEmojiTab===2\">\n\t\t\t\t\t\t<div class=\"emoji-list\" v-for=\"(img,index) in paopaoMapper\" :key=\"index\" @click=\"insertEmoji(img.name)\">\n\t\t\t\t\t\t\t<img :src=\"img.src\" :title=\"img.name\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"emoji-tabs\">\n\t\t\t\t\t\t<a class=\"tab-link\" :class=\"{'on':activeEmojiTab===0}\" @click=\"activeEmojiTab=0\">\n\t\t\t\t\t\t\t<img src=\"https://cdn.jsdelivr.net/gh/yoyling/JsDelivr/emoji/tv/1.png\">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a class=\"tab-link\" :class=\"{'on':activeEmojiTab===1}\" @click=\"activeEmojiTab=1\">\n\t\t\t\t\t\t\t<img src=\"https://cdn.jsdelivr.net/gh/yoyling/JsDelivr/emoji/aru/1.png\">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a class=\"tab-link\" :class=\"{'on':activeEmojiTab===2}\" @click=\"activeEmojiTab=2\">\n\t\t\t\t\t\t\t<img src=\"https://cdn.jsdelivr.net/gh/yoyling/JsDelivr/emoji/paopao/1.png\">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<el-form-item prop=\"nickname\">\n\t\t\t\t<el-popover ref=\"nicknamePopover\" placement=\"bottom\" trigger=\"focus\" content=\"输入QQ号将自动拉取昵称和头像\"></el-popover>\n\t\t\t\t<el-input v-model=\"commentForm.nickname\" placeholder=\"QQ（必填）\" :validate-event=\"false\" v-popover:nicknamePopover>\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-user\"></i>\n\t\t\t\t</el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item prop=\"email\">\n\t\t\t\t<el-popover ref=\"emailPopover\" placement=\"bottom\" trigger=\"focus\" content=\"用于接收回复邮件\"></el-popover>\n\t\t\t\t<el-input v-model=\"commentForm.email\" placeholder=\"邮箱（必填）\" :validate-event=\"false\" v-popover:emailPopover>\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-message\"></i>\n\t\t\t\t</el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item>\n\t\t\t\t<el-popover ref=\"websitePopover\" placement=\"bottom\" trigger=\"focus\" content=\"可以让我参观一下吗😊\"></el-popover>\n\t\t\t\t<el-input v-model=\"commentForm.website\" placeholder=\"https://（可选）\" v-popover:websitePopover>\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-map-location\"></i>\n\t\t\t\t</el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"订阅回复\">\n\t\t\t\t<el-switch v-model=\"commentForm.notice\"></el-switch>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item>\n\t\t\t\t<el-button type=\"primary\" size=\"medium\" v-throttle=\"[postForm,`click`,3000]\">发表评论</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n\t</div>\n</template>\n\n<script>\n\timport {mapState} from 'vuex'\n\timport {checkEmail} from \"@/common/reg\";\n\timport {SET_PARENT_COMMENT_ID} from \"@/store/mutations-types\";\n\timport tvMapper from '@/plugins/tvMapper.json'\n\timport aruMapper from '@/plugins/aruMapper.json'\n\timport paopaoMapper from '@/plugins/paopaoMapper.json'\n\n\texport default {\n\t\tname: \"CommentForm\",\n\t\tcomputed: {\n\t\t\t...mapState(['parentCommentId', 'commentForm', 'commentQuery'])\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tSET_PARENT_COMMENT_ID,\n\t\t\t\tformRules: {\n\t\t\t\t\tnickname: [\n\t\t\t\t\t\t{required: true, message: '请输入评论昵称'},\n\t\t\t\t\t\t{max: 18, message: '昵称不可多于15个字符'}\n\t\t\t\t\t],\n\t\t\t\t\temail: [\n\t\t\t\t\t\t{required: true, message: '请输入评论邮箱'},\n\t\t\t\t\t\t{validator: checkEmail}\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\temojiShow: false,\n\t\t\t\tactiveEmojiTab: 0,\n\t\t\t\ttvMapper: [],\n\t\t\t\taruMapper: [],\n\t\t\t\tpaopaoMapper: [],\n\t\t\t\ttextarea: null,\n\t\t\t\tstart: 0,\n\t\t\t\tend: 0,\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.tvMapper = tvMapper\n\t\t\tthis.aruMapper = aruMapper\n\t\t\tthis.paopaoMapper = paopaoMapper\n\t\t},\n\t\tmounted() {\n\t\t\tthis.textarea = document.querySelector('.el-form textarea')\n\t\t},\n\t\tmethods: {\n\t\t\tshowEmojiBox() {\n\t\t\t\tthis.start = this.textarea.selectionStart\n\t\t\t\tthis.end = this.textarea.selectionEnd\n\t\t\t\tthis.textarea.focus()\n\t\t\t\tthis.textarea.setSelectionRange(this.start, this.end)\n\t\t\t\tthis.emojiShow = !this.emojiShow\n\t\t\t},\n\t\t\tinsertEmoji(name) {\n\t\t\t\tlet str = this.commentForm.content\n\t\t\t\tthis.commentForm.content = str.substring(0, this.start) + name + str.substring(this.end)\n\t\t\t\tthis.start += name.length\n\t\t\t\tthis.end = this.start\n\t\t\t\tthis.textarea.focus()\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.textarea.setSelectionRange(this.start, this.end)\n\t\t\t\t})\n\t\t\t},\n\t\t\thideEmojiBox() {\n\t\t\t\tthis.emojiShow = false\n\t\t\t\tthis.textarea.focus()\n\t\t\t\tthis.textarea.setSelectionRange(this.start, this.end)\n\t\t\t},\n\t\t\tpostForm() {\n\t\t\t\tconst adminToken = window.localStorage.getItem('adminToken')\n\t\t\t\tif (adminToken) {\n\t\t\t\t\t//博主登录后，localStorage中会存储token，在后端设置属性，可以不校验昵称、邮箱\n\t\t\t\t\tif (this.commentForm.content === '' || this.commentForm.content.length > 250) {\n\t\t\t\t\t\treturn this.$notify({\n\t\t\t\t\t\t\ttitle: '评论失败',\n\t\t\t\t\t\t\tmessage: '评论内容有误',\n\t\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn this.$store.dispatch('submitCommentForm', adminToken)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst blogToken = window.localStorage.getItem(`blog${this.commentQuery.blogId}`)\n\t\t\t\tthis.$refs.formRef.validate(valid => {\n\t\t\t\t\tif (!valid || this.commentForm.content === '' || this.commentForm.content.length > 250) {\n\t\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\t\ttitle: '评论失败',\n\t\t\t\t\t\t\tmessage: '请正确填写评论',\n\t\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$store.dispatch('submitCommentForm', blogToken ? blogToken : '')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.form {\n\t\tbackground: #fff;\n\t\tposition: relative;\n\t}\n\n\t.form h3 {\n\t\tmargin: 5px;\n\t\tfont-weight: 500 !important;\n\t}\n\n\t.form .m-small {\n\t\tmargin-left: 5px;\n\t\tpadding: 4px 5px;\n\t}\n\n\t.el-form .textarea {\n\t\tmargin-top: 5px;\n\t\tmargin-bottom: 15px;\n\t}\n\n\t.el-form textarea {\n\t\tpadding: 6px 8px;\n\t}\n\t.el-form textarea, .el-form input {\n\t\tcolor: black;\n\t}\n\t.el-form .el-form-item__label {\n\t\tpadding-right: 3px;\n\t}\n\t.emoji {\n\t\tmargin-right: 5px;\n\t\tposition: relative;\n\t\tuser-select: none;\n\t}\n\t.emoji > img {\n\t\tcursor: pointer;\n\t\ttransition: all 0.3s ease-in-out;\n\t\t-webkit-transition: all 0.3s ease-in-out;\n\t\t-moz-transition: all 0.3s ease-in-out;\n\t\t-o-transition: all 0.3s ease-in-out;\n\t}\n\t.emoji > img:hover {\n\t\ttransform: rotate(360deg);\n\t\t-webkit-transform: rotate(360deg);\n\t\t-moz-transform: rotate(360deg);\n\t\t-o-transform: rotate(360deg);\n\t}\n\t.emoji-box {\n\t\tcolor: #222;\n\t\toverflow: visible;\n\t\tbackground: #fff;\n\t\tborder: 1px solid #E5E9EF;\n\t\tbox-shadow: 0 11px 12px 0 rgba(106, 115, 133, 0.3);\n\t\tborder-radius: 8px;\n\t\twidth: 340px;\n\t\tposition: absolute;\n\t\ttop: 40px;\n\t\tz-index: 100;\n\t}\n\t.emoji-box * {\n\t\tbox-sizing: content-box;\n\t}\n\t.emoji-box .emoji-title {\n\t\tfont-size: 12px;\n\t\tline-height: 16px;\n\t\tmargin: 13px 15px 0;\n\t\tcolor: #757575;\n\t}\n\t.emoji-box .emoji-wrap {\n\t\tmargin: 6px 11px 0 11px;\n\t\theight: 185px;\n\t\toverflow: auto;\n\t\tword-break: break-word;\n\t}\n\t.emoji-box .emoji-wrap .emoji-list {\n\t\theight: 33px;\n\t\tcolor: #111;\n\t\tborder-radius: 4px;\n\t\ttransition: background 0.2s;\n\t\tdisplay: inline-block;\n\t\toutline: 0;\n\t\tcursor: pointer;\n\t}\n\t.emoji-box .emoji-wrap .emoji-list:hover {\n\t\tbackground-color: #ddd;\n\t}\n\t.emoji-box .emoji-wrap .emoji-list img {\n\t\tmargin: 4px;\n\t\twidth: 25px;\n\t\theight: 25px;\n\t}\n\t.emoji-box .emoji-tabs {\n\t\tposition: relative;\n\t\theight: 36px;\n\t\toverflow: hidden;\n\t\tbackground-color: #f4f4f4;\n\t\tborder-radius: 0 0 4px 4px;\n\t}\n\t.emoji-box .emoji-tabs .tab-link {\n\t\tcursor: pointer;\n\t\tfloat: left;\n\t\tpadding: 7px 18px;\n\t\twidth: 22px;\n\t\theight: 22px;\n\t}\n\t.emoji-box .emoji-tabs .tab-link.on {\n\t\tbackground-color: #fff;\n\t}\n\t.emoji-box .emoji-tabs .tab-link img {\n\t\twidth: 22px;\n\t}\n\t.emoji-box .emoji-tabs .tab-link:hover {\n\t\tbackground: #e7e7e7;\n\t}\n\t.mask {\n\t\tpointer-events: auto;\n\t\tposition: fixed;\n\t\tz-index: 99;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t}\n\n</style>"],"sourceRoot":"src/components/comment"}]}