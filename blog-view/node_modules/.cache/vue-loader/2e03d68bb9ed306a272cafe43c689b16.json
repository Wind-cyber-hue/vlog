{"remainingRequest":"/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cm/Blog/blog-view/src/views/moments/Moments.vue?vue&type=style&index=0&id=6a518c0d&scoped=true&lang=css&","dependencies":[{"path":"/Users/cm/Blog/blog-view/src/views/moments/Moments.vue","mtime":1683690398309},{"path":"/Users/cm/Blog/blog-view/node_modules/css-loader/dist/cjs.js","mtime":1686729283954},{"path":"/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1686729286820},{"path":"/Users/cm/Blog/blog-view/node_modules/postcss-loader/src/index.js","mtime":1686729285363},{"path":"/Users/cm/Blog/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":1686729283471},{"path":"/Users/cm/Blog/blog-view/node_modules/vue-loader/lib/index.js","mtime":1686729286819}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYXZhdGFyIHsKCW1hcmdpbi1sZWZ0OiAtNjIuNXB4OwoJZmxvYXQ6IGxlZnQgIWltcG9ydGFudDsKfQoKLmF2YXRhciBpbWcgewoJaGVpZ2h0OiA0NXB4OwoJd2lkdGg6IDQ1cHg7Cglib3JkZXItcmFkaXVzOiA1MDBweDsKfQoKLm1vbWVudHMgewoJbWFyZ2luLWxlZnQ6IDI2cHggIWltcG9ydGFudDsKCXBhZGRpbmctbGVmdDogNDBweCAhaW1wb3J0YW50OwoJYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZGVlNWU3ICFpbXBvcnRhbnQ7Cn0KCi5tb21lbnQgewoJbWFyZ2luLXRvcDogMzBweDsKfQoKLm1vbWVudDpmaXJzdC1jaGlsZCB7CgltYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7Cn0KCi5jYXJkIHsKCXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7Cn0KCi5jYXJkOmJlZm9yZSB7Cglib3JkZXItd2lkdGg6IDAgMCAxcHggMXB4ICFpbXBvcnRhbnQ7Cgl0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoNDVkZWcpICFpbXBvcnRhbnQ7Cglib3R0b206IGF1dG8gIWltcG9ydGFudDsKCXJpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7Cgl0b3A6IDIycHggIWltcG9ydGFudDsKCWxlZnQ6IDAgIWltcG9ydGFudDsKCXBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OwoJY29udGVudDogJycgIWltcG9ydGFudDsKCWJhY2tncm91bmQtaW1hZ2U6IG5vbmUgIWltcG9ydGFudDsKCXotaW5kZXg6IDIgIWltcG9ydGFudDsKCXdpZHRoOiAxMnB4ICFpbXBvcnRhbnQ7CgloZWlnaHQ6IDEycHggIWltcG9ydGFudDsKCXRyYW5zaXRpb246IGJhY2tncm91bmQgLjFzIGVhc2UgIWltcG9ydGFudDsKCWJhY2tncm91bmQtY29sb3I6IGluaGVyaXQgIWltcG9ydGFudDsKCWJvcmRlci1zdHlsZTogc29saWQgIWltcG9ydGFudDsKCWJvcmRlci1jb2xvcjogI2Q0ZDRkNSAhaW1wb3J0YW50Owp9CgouY29udGVudC5tLXRvcCB7CglwYWRkaW5nOiAxMHB4IDE0cHggIWltcG9ydGFudDsKfQoKLmNvbnRlbnQgLnJpZ2h0LmZsb2F0ZWQgewoJZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7Cn0KCi5jb250ZW50LnR5cG8gKiB7Cglmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsKfQoKLmV4dHJhLmNvbnRlbnQgewoJcGFkZGluZzogNXB4IDE0cHggIWltcG9ydGFudDsKfQoKLmV4dHJhLmNvbnRlbnQgYSB7Cgljb2xvcjogcmdiYSgwLCAwLCAwLCAwLjcpICFpbXBvcnRhbnQ7Cglmb250LXNpemU6IDEycHggIWltcG9ydGFudDsKfQoKLmV4dHJhLmNvbnRlbnQgYTpob3ZlciB7Cgljb2xvcjogcmVkICFpbXBvcnRhbnQ7Cn0KCi5leHRyYS5jb250ZW50IC5saWtlLWNvbG9yIHsKCWNvbG9yOiByZWQgIWltcG9ydGFudDsKfQoKLmV4dHJhLmNvbnRlbnQgaSB7Cglmb250LXNpemU6IDEycHggIWltcG9ydGFudDsKfQoKLnBhZ2luYXRpb24gewoJdGV4dC1hbGlnbjogY2VudGVyOwoJbWFyZ2luLXRvcDogM2VtOwp9CgoucHJpdmFjeSB7CgliYWNrZ3JvdW5kOiByZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KDE0NWRlZywgI2YyZjJmMiwgI2YyZjJmMiAxNXB4LCAjZmZmIDAsICNmZmYgMzBweCkgIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["Moments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Moments.vue","sourceRoot":"src/views/moments","sourcesContent":["<template>\n\t<div>\n\t\t<div class=\"ui top attached segment\" style=\"text-align: center\">\n\t\t\t<h2 class=\"m-text-500\">我的动态</h2>\n\t\t</div>\n\t\t<div class=\"ui attached segment m-padding-bottom-large\">\n\t\t\t<div class=\"moments\">\n\t\t\t\t<div class=\"moment\" v-for=\"(moment,index) in momentList\" :key=\"index\">\n\t\t\t\t\t<div class=\"avatar\">\n\t\t\t\t\t\t<img :src=\"$store.state.introduction.avatar\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui card\">\n\t\t\t\t\t\t<div class=\"content m-top\">\n\t\t\t\t\t\t\t<span style=\"font-weight: 700\">{{ $store.state.introduction.name }}</span>\n\t\t\t\t\t\t\t<span class=\"right floated\">{{ moment.createTime | dateFromNow }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"content typo\" :class=\"{'privacy':!moment.published}\" v-viewer v-html=\"moment.content\"></div>\n\t\t\t\t\t\t<div class=\"extra content\">\n\t\t\t\t\t\t\t<a class=\"left floated\" @click=\"like(moment.id)\">\n\t\t\t\t\t\t\t\t<i class=\"heart icon\" :class=\"isLike(moment.id)?'like-color':'outline'\"></i>{{ moment.likes }}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<el-pagination @current-change=\"handleCurrentChange\" :current-page=\"pageNum\" :page-count=\"totalPage\"\n\t\t\t               layout=\"prev, pager, next\" background hide-on-single-page class=\"pagination\">\n\t\t\t</el-pagination>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport {getMomentListByPageNum, likeMoment} from \"@/api/moment\";\n\n\texport default {\n\t\tname: \"Moments\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t//用localStorage本地存储已点赞的动态id数组\n\t\t\t\tlikeMomentIds: JSON.parse(window.localStorage.getItem('likeMomentIds') || '[]'),\n\t\t\t\tmomentList: [],\n\t\t\t\tpageNum: 1,\n\t\t\t\ttotalPage: 0\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.getMomentList()\n\t\t},\n\t\tcomputed: {\n\t\t\tisLike() {\n\t\t\t\treturn function (id) {\n\t\t\t\t\treturn this.likeMomentIds.indexOf(id) > -1\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tlikeMomentIds(newValue) {\n\t\t\t\t//将likeMomentIds最新值的json数据保存到localStorage\n\t\t\t\twindow.localStorage.setItem('likeMomentIds', JSON.stringify(newValue))\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tgetMomentList() {\n\t\t\t\t//如果有则发送博主身份Token\n\t\t\t\tconst adminToken = window.localStorage.getItem('adminToken')\n\t\t\t\tconst token = adminToken ? adminToken : ''\n\t\t\t\tgetMomentListByPageNum(token, this.pageNum).then(res => {\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tthis.momentList = res.data.list\n\t\t\t\t\t\tthis.totalPage = res.data.totalPage\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.msgError(res.msg)\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.msgError(\"请求失败\")\n\t\t\t\t})\n\t\t\t},\n\t\t\thandleCurrentChange(newPage) {\n\t\t\t\tthis.scrollToTop()\n\t\t\t\tthis.pageNum = newPage\n\t\t\t\tthis.getMomentList()\n\t\t\t},\n\t\t\tlike(id) {\n\t\t\t\tif (this.likeMomentIds.indexOf(id) > -1) {\n\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\ttitle: '不可以重复点赞哦',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlikeMoment(id).then(res => {\n\t\t\t\t\tif (res.code === 200) {\n\t\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\t\ttitle: res.msg,\n\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.likeMomentIds.push(id)\n\t\t\t\t\t\tthis.momentList.forEach(item => {\n\t\t\t\t\t\t\tif (item.id === id) {\n\t\t\t\t\t\t\t\treturn item.likes++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\t\ttitle: res.msg,\n\t\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$notify({\n\t\t\t\t\t\ttitle: '异常错误',\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.avatar {\n\t\tmargin-left: -62.5px;\n\t\tfloat: left !important;\n\t}\n\n\t.avatar img {\n\t\theight: 45px;\n\t\twidth: 45px;\n\t\tborder-radius: 500px;\n\t}\n\n\t.moments {\n\t\tmargin-left: 26px !important;\n\t\tpadding-left: 40px !important;\n\t\tborder-left: 1px solid #dee5e7 !important;\n\t}\n\n\t.moment {\n\t\tmargin-top: 30px;\n\t}\n\n\t.moment:first-child {\n\t\tmargin-top: 0 !important;\n\t}\n\n\t.card {\n\t\twidth: 100% !important;\n\t}\n\n\t.card:before {\n\t\tborder-width: 0 0 1px 1px !important;\n\t\ttransform: translateX(-50%) translateY(-50%) rotate(45deg) !important;\n\t\tbottom: auto !important;\n\t\tright: auto !important;\n\t\ttop: 22px !important;\n\t\tleft: 0 !important;\n\t\tposition: absolute !important;\n\t\tcontent: '' !important;\n\t\tbackground-image: none !important;\n\t\tz-index: 2 !important;\n\t\twidth: 12px !important;\n\t\theight: 12px !important;\n\t\ttransition: background .1s ease !important;\n\t\tbackground-color: inherit !important;\n\t\tborder-style: solid !important;\n\t\tborder-color: #d4d4d5 !important;\n\t}\n\n\t.content.m-top {\n\t\tpadding: 10px 14px !important;\n\t}\n\n\t.content .right.floated {\n\t\tfont-size: 12px !important;\n\t}\n\n\t.content.typo * {\n\t\tfont-size: 14px !important;\n\t}\n\n\t.extra.content {\n\t\tpadding: 5px 14px !important;\n\t}\n\n\t.extra.content a {\n\t\tcolor: rgba(0, 0, 0, 0.7) !important;\n\t\tfont-size: 12px !important;\n\t}\n\n\t.extra.content a:hover {\n\t\tcolor: red !important;\n\t}\n\n\t.extra.content .like-color {\n\t\tcolor: red !important;\n\t}\n\n\t.extra.content i {\n\t\tfont-size: 12px !important;\n\t}\n\n\t.pagination {\n\t\ttext-align: center;\n\t\tmargin-top: 3em;\n\t}\n\n\t.privacy {\n\t\tbackground: repeating-linear-gradient(145deg, #f2f2f2, #f2f2f2 15px, #fff 0, #fff 30px) !important;\n\t}\n</style>"]}]}